<div *ngIf="formTripShow" class="div-location w-100 bg-primary">
  <div class="border">
    <pe-form-trip-location
      [currentTrip]="currentTrip"
      [latSelect]="latSelect"
      [title]="title"
      (tripFinished)="tripFinished($event)"
      (submitedForm)="submitedForm($event)"
      (hideForm)="hideForm($event)"
      (cancelTripSubmitVar)="cancelTripSubmitVar($event)"
    ></pe-form-trip-location>
  </div>
</div>
<div class="parent">
  <div class="text-center" *ngIf="createTripActivate">
    <pe-trips [currentTrip]="currentTrip"></pe-trips>
  </div>
  <div class="w-100 text-center box">
    <div class="location-input" cdkDrag>
      <!--

     <pe-advanced-autocomplete
     (results)="change($event)"
     ></pe-advanced-autocomplete>
    --></div>
    <div [class.invisible]="!showMap" class="absolute-50">
      <div class="w-100 bg-light" cdkDrag>
        <div
          *ngFor="let item of typeOflocations"
          (click)="change(item)"
          class="w-100"
        >
          <img
            [title]="item"
            [src]="'./assets/img/' + item + '.png'"
            class="img-icon m-1"
            [class.active-type]="
              selectedType === item || (item === 'saved' && savedLocation)
            "
          />
        </div>
        <div
          class="mt-2"
          joyrideStep="secondStep"
          text="You can measure distance between two place"
        >
          <span
            [class.disabled]="!distanceActivated"
            (click)="activeDistanceMeter()"
            class="text-sign language text-primary p-1 m-1 text-large"
          >
            D
          </span>
        </div>
        <div
          class=""
          joyrideStep="firstStep"
          text="You can make a trip and schedule it "
        >
          <span
            [class.disabled]="!createTripActivate"
            (click)="createTrip()"
            class="text-sign language text-primary p-1 m-1 text-large"
          >
            T
          </span>
        </div>
      </div>
    </div>
    <div class="attached-text p-1"></div>
    <div [class.invisible]="!showMap" class="map-container">
      <div class="fixed-country shadow-lg cursor-pointer" cdkDrag>
        <div
          class="animated-fadein text-large text-green bg-white w-100"
          *ngIf="distanceActivated"
        >
          <span> DISTANCE MODE </span>
        </div>
        <div>
          <span
            >{{ draggingLocation.country }} {{ draggingLocation.city }}</span
          >
        </div>
        <div class="text-muted text-meduim">
          <span>
            {{ draggingLocation.suburb }}
            {{ draggingLocation.street }}
          </span>
        </div>
      </div>

      <div #mapContainer class="map-frame w-100">
        <div id="map"></div>
      </div>
    </div>
  </div>
</div>
<ng-template #doneButton>
  <button mat-raised-button color="primary" (click)="showTour = false">
    Done !
  </button>
</ng-template>

<div *ngIf="openModalLocationListFlag" class="modal-absolute w-100 text-center">
  <div class="inner w-75 text-left">
    <div class="d-relative">
      <pe-location-list
        [city]="city"
        [state]="state"
        [country]="country"
        (selectedLocation)="selectedLocation($event)"
      ></pe-location-list>
      <div class="close-div">
        <i class="fa fa-close fa-2x" (click)="openModalLocationList(false)"></i>
      </div>
    </div>
  </div>
</div>

<div *ngIf="openModalLocationFlag" class="modal-absolute text-center">
  <div class="inner w-25 bg-light m-3">
    <div class="d-relative m-2 p-2 rounded-0 text-dark text-left">
      <div>
        <span class="fw-bold text-capitalize m-2 p-2">{{
          locationForModal[0].title
        }}</span>
        <span class="fw-bold text-capitalize m-2 p-2">{{
          locationForModal[0].type
        }}</span>
      </div>
      <div>
        <span class="text-capitalize m-2 p-2">{{
          locationForModal[0].district
        }}</span
        ><span class="text-capitalize m-2 p-2">{{
          locationForModal[0].phone
        }}</span>
      </div>
      <div class="m-2 p-2">
        <a
          class="link-darks border p-2"
          (click)="bindExistsLocation(locationForModal[0])"
        >
          details
        </a>
      </div>
    </div>
    <div class="close-div">
      <i class="fa fa-close fa-2x" (click)="openModalLocationFlag = false"></i>
    </div>
  </div>
</div>
