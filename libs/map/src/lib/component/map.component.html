<div *ngIf="formTripShow" class="div-location w-100 bg-primary">
  <div class="border">
    <pe-form-trip-location
      [currentTrip]="currentTrip"
      [latSelect]="latSelect"
      [title]="title"
      (tripFinished)="tripFinished($event)"
      (submitedForm)="submitedForm($event)"
      (hideForm)="hideForm($event)"
      (cancelTripSubmitVar)="cancelTripSubmitVar($event)"
    ></pe-form-trip-location>
  </div>
</div>
<div class="parent">
  <div class="text-center" *ngIf="createTripActivate">
    <pe-trips [currentTrip]="currentTrip"></pe-trips>
  </div>
  <div class="w-100 text-center box">
    <!--  <div [class.invisible]="!showMap" class="absolute-50">
      <div class="w-100 bg-light" cdkDrag>
        <div
          *ngFor="let item of typeOflocations"
          (click)="change(item)"
          class="w-100"
        >
          <img
            [title]="item"
            [src]="'./assets/img/' + item + '.png'"
            class="img-icon m-1"
            [class.active-type]="
              selectedType === item || (item === 'saved' && savedLocation)
            "
          />
        </div>


        <div
        class="mt-2"
        
        >
        
      </div>
      <div
      class=""
      
      >
      
    </div>
  </div>
</div>
-->

    <div [class.invisible]="!showMap" class="map-container">
      <div class="fixed-country shadow-lg cursor-pointer" cdkDrag>
        <div
          class="animated-fadein text-large text-green bg-white w-100"
          *ngIf="distanceActivated"
        >
          <span> DISTANCE MODE </span>
        </div>
        <div>
          <span
            >{{ draggingLocation.country }} {{ draggingLocation.city }}</span
          >
        </div>
        <div class="text-muted text-meduim">
          <span>
            {{ draggingLocation.suburb }}
            {{ draggingLocation.street }}
          </span>
        </div>
      </div>

      <div class="location-input" cdkDrag>
        <div class="d-flex flex-nowrap">
          <div class="relative flex-cell shadow-lg">
            <pe-advanced-autocomplete
              (results)="change($event)"
            ></pe-advanced-autocomplete>
            <div
              *ngIf="selectedType !== 'all'"
              class="w-100 text-left searched-type"
            >
              <button
                style="height: 2.7em !important"
                mat-stroked-button
                class="bg-light shadow-lg fw-bold"
                (click)="change('all')"
              >
                {{ selectedType }}
                <i class="fa fa-close"></i>
              </button>
            </div>
          </div>

          <div class="flex-cell pl-3">
            <span *ngIf="!distanceActivated" (click)="toolsShow = true">
              <button
                mat-stroked-button
                style="height: 2.7em !important"
                class="fw-bold bg-light"
              >
                T
              </button>
            </span>
            <span
              *ngIf="distanceActivated"
              (click)="cancelTools()"
              class="pl-3"
            >
              <button
                mat-stroked-button
                class="bg-light"
                style="height: 2.7em !important"
              >
                Distance
                <i class="fa fa-close"></i>
              </button>
            </span>
          </div>
        </div>
      </div>

      <div #mapContainer class="map-frame w-100 d-relative">
        <div id="map"></div>
        <div class="d-fixed bg-light animated-fadein" *ngIf="toolsShow">
          <div class="text-left p- m-1 link-darks">
            <div class="p-3">
              <span
                joyrideStep="secondStep"
                text="You can measure distance between two place"
                [class.disabled]="!distanceActivated"
                (click)="activeDistanceMeter()"
                class="text-large m-2 link-darks"
              >
                Distance Meter
              </span>
            </div>

            <div class="p-3">
              <span
                joyrideStep="firstStep"
                text="You can make a trip and schedule it "
                [class.disabled]="!createTripActivate"
                (click)="createTrip()"
                class="text-large m-2 link-darks"
              >
                Trip Creator
              </span>
            </div>
          </div>
          <div class="text-left p-2 m-2">
            <button mat-stroked-button (click)="toolsShow = false">
              cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #doneButton>
  <button mat-raised-button color="primary" (click)="showTour = false">
    Done !
  </button>
</ng-template>

<div *ngIf="openModalLocationListFlag" class="modal-absolute w-100 text-center">
  <div class="inner w-75 text-left">
    <div class="d-relative">
      <pe-location-list
        [type]="savedLocationFlag"
        [city]="city"
        [state]="state"
        [country]="country"
        (selectedLocation)="selectedLocation($event)"
      ></pe-location-list>
      <i class="fa fa-close fa-2x" (click)="openModalLocationList(false)"></i>
    </div>
  </div>
</div>

<div *ngIf="openModalLocationFlag" class="modal-absolute text-center">
  <div class="inner w-25 bg-light m-3">
    <div class="d-relative m-2 p-2 rounded-0 text-dark text-left">
      <div>
        <span class="fw-bold text-capitalize m-2 p-2">{{
          locationForModal[0].title
        }}</span>
        <span class="fw-bold text-capitalize m-2 p-2">{{
          locationForModal[0].type
        }}</span>
      </div>
      <div>
        <span class="text-capitalize m-2 p-2">{{
          locationForModal[0].district
        }}</span
        ><span class="text-capitalize m-2 p-2">{{
          locationForModal[0].phone
        }}</span>
      </div>
      <div class="m-2 p-2">
        <span>
          <a
            class="link-darks border p-2 m-2 fw-bold"
            (click)="bindExistsLocation(locationForModal[0])"
          >
            details
          </a>
        </span>
        <span>
          <a
            class="link-darks border p-2 m-2"
            (click)="openModalLocationFlag = false"
          >
            cancel
          </a>
        </span>
      </div>
    </div>
  </div>
</div>
