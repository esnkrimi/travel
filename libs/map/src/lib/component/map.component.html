<div class="parent">
  <div class="w-100 text-center box">
    <div [class.invisible]="!setting.showMap" class="map-container">
      <div
        joyrideStep="distanceTools"
        text="get current your location"
        class="fixed-country shadow-lg cursor-pointer"
        cdkDrag
      >
        <div
          class="animated-fadein text-large text-green bg-white w-100"
          *ngIf="setting.distanceActivated"
        >
          <span> {{ 'distanceMode' | translate }} </span>
        </div>
        <div>
          <span
            >{{ draggingLocation.country }} {{ draggingLocation.city }}</span
          >
        </div>
        <div class="text-muted text-meduim">
          <span>
            {{ draggingLocation.suburb }}
            {{ draggingLocation.street }}
          </span>
        </div>
      </div>

      <div #mapContainer class="map-framed-relative">
        <div class="my-position-button" (click)="setViewMylocation()">
          <img
            src="https://cdn.icon-icons.com/icons2/1875/PNG/512/mylocation_120247.png"
            class="img-icon"
          />
        </div>
        <div
          *ngIf="!setting.toolsShow"
          class="tools-pane text-left div-tools"
          (click)="setting.toolsShow = !setting.toolsShow"
        >
          <i class="fa fa-wrench fa-2x"></i>
        </div>
        <div *ngIf="setting.toolsShow" class="w-25 text-left div-tools">
          <div>
            <i
              (click)="setting.toolsShow = !setting.toolsShow"
              class="fa fa-close close-button-top-right"
            ></i>
          </div>
          <div class="p-2">
            <div
              joyrideStep="typeChange"
              text="change location type, eg. Hotel"
            >
              <pe-advanced-autocomplete
                (results)="change($event)"
              ></pe-advanced-autocomplete>
            </div>
            <div
              *ngIf="selectedType !== ''"
              class="w-100 text-left searched-type"
            >
              <button
                style="height: 2.4em !important"
                mat-stroked-button
                class="bg-light shadow-lg fw-bold"
                (click)="change('')"
              >
                {{ selectedType }}
                <i class="fa fa-close"></i>
              </button>
            </div>
          </div>
          <div>
            <button
              mat-stroked-button
              joyrideStep="mylocatioonTools"
              text="set your current location.It can be used later"
              class="text-dark"
              [class.border-0]="!setting.currentLocationActivated"
              [class.border-active-btn]="setting.currentLocationActivated"
              (click)="activeCUrrentLocation()"
            >
              {{ 'current' | translate }}
            </button>
          </div>
          <div>
            <button
              mat-stroked-button
              joyrideStep="distanceTools"
              text="calculate distance between two point"
              class="text-dark"
              [class.border-0]="!setting.distanceActivated"
              [class.border-active-btn]="setting.distanceActivated"
              (click)="activeDistanceMeter()"
            >
              {{ 'distanceMeter' | translate }}
            </button>
          </div>
          <div>
            <button
              mat-stroked-button
              joyrideStep="routingTools"
              text="You can get direction to routing from your current location  to destination"
              class="text-dark"
              [class.border-0]="!setting.routingActivated"
              [class.border-active-btn]="setting.routingActivated"
              (click)="activeRouting()"
            >
              {{ 'routing' | translate }}
            </button>
          </div>
        </div>

        <div id="map"></div>
      </div>
    </div>
  </div>
</div>
<ng-template #doneButton>
  <button mat-raised-button color="primary" (click)="showTour = false">
    Done !
  </button>
</ng-template>

<div
  *ngIf="setting.openModalLocationListFlag"
  class="modal-absolute w-100 text-center"
>
  <div class="inner w-75 text-left">
    <div class="d-relative">
      <pe-location-list
        [type]="setting.savedLocationFlag"
        [city]="city"
        [state]="state"
        [country]="country"
        (selectedLocation)="selectedLocation($event)"
      ></pe-location-list>

      <i
        class="fa fa-close close-button-top-right link-darks fa-2x text-muted"
        (click)="openModalLocationList(false)"
      ></i>
    </div>
  </div>
</div>

<div *ngIf="setting.openModalLocationFlag" class="modal-absolute text-center">
  <div class="inner w-25 bg-light m-3">
    <div class="d-relative ml-2 pl-2 rounded-0 text-dark text-left">
      <div class="headers w-100 text-right pr-3 opacity-75">
        <span>
          <i
            class="fa fa-close cursor-pointer text-muted"
            (click)="setting.openModalLocationFlag = false"
          >
          </i>
        </span>
      </div>
      <div class="border-bottom text-blueblack p-2 m-1">
        <span class="fw-bold text-capitalize text-large">{{
          locationForModal[0].title
        }}</span
        >&nbsp;
        <span class="fw-bold text-capitalize text-large">{{
          locationForModal[0].type
        }}</span>
      </div>

      <div class="m-2 p-2">
        <div class="p-2">
          <a
            class="link-darks p-2 m-2"
            (click)="bindExistsLocation(locationForModal[0])"
          >
            {{ 'view' | translate }}
          </a>
        </div>

        <div class="p-2">
          <a
            class="link-darks p-2 m-2"
            (click)="getRouteHere(locationForModal[0])"
          >
            {{ 'directionHere' | translate }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
