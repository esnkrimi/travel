<div class="parent">
  <div class="w-100 text-center box">
    <div [class.invisible]="!setting.showMap" class="map-container">
      <div
        joyrideStep="distanceTools"
        text="get current your location"
        class="fixed-country shadow-lg cursor-pointer"
        cdkDrag
      >
        <div
          class="animated-fadein text-large text-green bg-white w-100"
          *ngIf="setting.distanceActivated"
        >
          <span> {{ 'distanceMode' | translate }} </span>
        </div>
        <div>
          <span
            >{{ draggingLocation.country }} {{ draggingLocation.city }}</span
          >
        </div>
        <div class="text-muted text-meduim">
          <span>
            {{ draggingLocation.suburb }}
            {{ draggingLocation.street }}
          </span>
        </div>
      </div>

      <div #mapContainer class="map-frame w-100 d-relative">
        <div class="div-tools row w-100">
          <div class="shadow-lg col-md-6">
            <div
              class="w-50"
              joyrideStep="typeChange"
              text="change location type, eg. Hotel"
            >
              <pe-advanced-autocomplete
                (results)="change($event)"
              ></pe-advanced-autocomplete>
            </div>
            <div
              *ngIf="selectedType !== ''"
              class="w-100 text-left searched-type"
            >
              <button
                style="height: 2.4em !important"
                mat-stroked-button
                class="bg-light shadow-lg fw-bold"
                (click)="change('')"
              >
                {{ selectedType }}
                <i class="fa fa-close"></i>
              </button>
            </div>
          </div>

          <div class="fl col-md-6 text-right gradient">
            <button
              mat-stroked-button
              joyrideStep="mylocatioonTools"
              text="set your current location.It can be used later"
              class="ml-1 text-light"
              [class.border-0]="!setting.currentLocationActivated"
              [class.border-active-btn]="setting.currentLocationActivated"
              (click)="activeCUrrentLocation()"
            >
              {{ 'current' | translate }}
            </button>
            <button
              mat-stroked-button
              joyrideStep="distanceTools"
              text="calculate distance between two point"
              class="ml-1 text-light"
              [class.border-0]="!setting.distanceActivated"
              [class.border-active-btn]="setting.distanceActivated"
              (click)="activeDistanceMeter()"
            >
              {{ 'distanceMeter' | translate }}
            </button>
            <button
              mat-stroked-button
              joyrideStep="routingTools"
              text="You can get direction to routing from your current location  to destination"
              class="ml-1 text-light"
              [class.border-0]="!setting.routingActivated"
              [class.border-active-btn]="setting.routingActivated"
              (click)="activeRouting()"
            >
              {{ 'routing' | translate }}
            </button>
          </div>
        </div>

        <div id="map"></div>
      </div>
    </div>
  </div>
</div>
<ng-template #doneButton>
  <button mat-raised-button color="primary" (click)="showTour = false">
    Done !
  </button>
</ng-template>

<div
  *ngIf="setting.openModalLocationListFlag"
  class="modal-absolute w-100 text-center"
>
  <div class="inner w-75 text-left">
    <div class="d-relative">
      <pe-location-list
        [type]="setting.savedLocationFlag"
        [city]="city"
        [state]="state"
        [country]="country"
        (selectedLocation)="selectedLocation($event)"
      ></pe-location-list>
      <i
        class="fa fa-close icon-close link-darks fa-2x"
        (click)="openModalLocationList(false)"
      ></i>
    </div>
  </div>
</div>

<div *ngIf="setting.openModalLocationFlag" class="modal-absolute text-center">
  <div class="inner w-25 bg-light m-3">
    <div class="d-relative ml-2 pl-2 rounded-0 text-dark text-left">
      <br />
      <div class="ml-2 pl-2">
        <span class="fw-bold text-capitalize">{{
          locationForModal[0].title
        }}</span
        >&nbsp;
        <span class="fw-bold text-capitalize">{{
          locationForModal[0].type
        }}</span>
      </div>
      <div class="ml-2 pl-2 border-bottom w-90">
        <div class="d-flex p-1">
          <div class="p-1 border m-1">
            <span class="sign">
              {{ extractRate(locationForModal[0].avgRate)[0] }}
            </span>
            <span class="p-2">
              <i class="fa fa-thumbs-up text-green"></i>
            </span>
          </div>
          <div class="p-1 border m-1">
            <span class="sign">
              {{ extractRate(locationForModal[0].avgRate)[1] }}
            </span>
            <span class="p-2">
              <i class="fa fa-thumbs-down text-danger"></i>
            </span>
          </div>
        </div>
      </div>
      <div>
        <span class="text-capitalize m-2 p-2">{{
          locationForModal[0].district
        }}</span>
      </div>
      <div>
        <span class="text-capitalize m-2 p-2">{{
          locationForModal[0].phone
        }}</span>
      </div>
      <div class="m-2 p-2">
        <span>
          <a
            class="link-darks border p-2 m-2 fw-bold"
            (click)="bindExistsLocation(locationForModal[0])"
          >
            {{ 'view' | translate }}
          </a>
        </span>
        <span>
          <a
            class="link-darks border p-2 m-2"
            (click)="setting.openModalLocationFlag = false"
          >
            {{ 'cancel' | translate }}
          </a>
        </span>
      </div>
    </div>
  </div>
</div>
